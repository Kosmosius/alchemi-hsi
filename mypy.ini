# mypy.ini
[mypy]
python_version = 3.11
strict = True
warn_unused_configs = True
files = .
mypy_path = src
follow_imports = skip
show_error_codes = True
plugins = pydantic.mypy

# --- Third-party libraries missing type information ---
[mypy-yaml]
ignore_missing_imports = True

[mypy-typer]
ignore_missing_imports = True

[mypy-sklearn.*]
ignore_missing_imports = True

[mypy-scipy.*]
ignore_missing_imports = True

[mypy-rasterio]
ignore_missing_imports = True

[mypy-zarr]
ignore_missing_imports = True

[mypy-joblib]
ignore_missing_imports = True

[mypy-torch.*]
ignore_missing_imports = True

[mypy-pydantic.*]
ignore_missing_imports = True

disallow_subclassing_any = False

# Relax subclassing checks for modules that build on torch/pydantic.
[mypy-alchemi.models.*]
disallow_subclassing_any = False

[mypy-alchemi.losses.*]
disallow_subclassing_any = False

[mypy-alchemi.heads.*]
disallow_subclassing_any = False

[mypy-alchemi.align.*]
disallow_subclassing_any = False

[mypy-alchemi.train.*]
disallow_subclassing_any = False

# Local hypothesis shims behave dynamically; keep them out of strict checking.
[mypy-hypothesis.*]
ignore_errors = True

[mypy-tests._hypothesis_stub.*]
ignore_errors = True

# Physics kernels are numerically heavy and will be typed incrementally.
[mypy-alchemi.physics.*]
disallow_untyped_defs = False
warn_return_any = False
no_warn_no_return = True

# Tests are outside the current typing scope.
[mypy-tests.*]
ignore_errors = True
